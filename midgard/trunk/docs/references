I got the very first idea from this article:

http://ebiquity.umbc.edu/blogger/2007/03/02/building-a-xmpp-gtalk-agent/